{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/Web%20Core%20EX/Web%20Core%20EX/src/components/GeminiChat.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useRef, useEffect, KeyboardEvent, ChangeEvent } from 'react';\r\nimport { MessageSquare, X, Send, Loader2, Bot, Sparkles, Trash2 } from 'lucide-react';\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\ninterface Message {\r\n  text: string;\r\n  sender: 'user' | 'ai';\r\n}\r\n\r\nconst GeminiChat: React.FC = () => {\r\n  // 1. Load history from LocalStorage if it exists\r\n  const [messages, setMessages] = useState<Message[]>(() => {\r\n    const saved = localStorage.getItem('chat_history');\r\n    return saved ? JSON.parse(saved) : [\r\n      { text: \"Hi there! ðŸ‘‹ I'm the Web Core EX Assistant. How can I help launch your startup today?\", sender: \"ai\" }\r\n    ];\r\n  });\r\n\r\n  const [isOpen, setIsOpen] = useState<boolean>(false);\r\n  const [input, setInput] = useState<string>('');\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [hasOpenedAuto, setHasOpenedAuto] = useState<boolean>(false);\r\n  \r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  // 2. Save messages to LocalStorage whenever they change\r\n  useEffect(() => {\r\n    localStorage.setItem('chat_history', JSON.stringify(messages));\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  // 3. Auto-Open after 5 seconds (Only once per session)\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      if (!isOpen && !hasOpenedAuto && messages.length === 1) {\r\n        setIsOpen(true);\r\n        setHasOpenedAuto(true);\r\n        // Optional: Play a soft 'pop' sound here if you want\r\n      }\r\n    }, 5000); // 5000ms = 5 seconds\r\n    return () => clearTimeout(timer);\r\n  }, [isOpen, hasOpenedAuto, messages.length]);\r\n\r\n  const clearChat = () => {\r\n    const initialMsg: Message[] = [{ text: \"Chat cleared. How can I help?\", sender: \"ai\" }];\r\n    setMessages(initialMsg);\r\n    localStorage.removeItem('chat_history');\r\n  };\r\n\r\n  const sendMessage = async (textToSend: string) => {\r\n    if (!textToSend.trim()) return;\r\n\r\n    setMessages(prev => [...prev, { text: textToSend, sender: \"user\" }]);\r\n    setInput('');\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch('/api/chat', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ message: textToSend }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      setMessages(prev => [...prev, { text: data.reply, sender: \"ai\" }]);\r\n    } catch (error) {\r\n      console.error(\"Error:\", error);\r\n      setMessages(prev => [...prev, { text: \"I'm having trouble connecting. Please email us at hello@webcoreex.com\", sender: \"ai\" }]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Enter') sendMessage(input);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* TOGGLE BUTTON */}\r\n      {!isOpen && (\r\n        <button \r\n          onClick={() => setIsOpen(true)}\r\n          className=\"group flex items-center gap-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 transition-all duration-300 hover:shadow-cyan-500/50\"\r\n        >\r\n          <div className=\"relative\">\r\n            <MessageSquare size={28} />\r\n            {/* Red Notification Dot */}\r\n            <span className=\"absolute -top-1 -right-1 flex h-3 w-3\">\r\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75\"></span>\r\n              <span className=\"relative inline-flex rounded-full h-3 w-3 bg-red-500\"></span>\r\n            </span>\r\n          </div>\r\n          <span className=\"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-500 whitespace-nowrap font-medium text-sm\">\r\n            Start Chat\r\n          </span>\r\n        </button>\r\n      )}\r\n\r\n      {/* CHAT WINDOW */}\r\n      {isOpen && (\r\n        <div className=\"w-[90vw] sm:w-[380px] h-[550px] max-h-[80vh] bg-gray-900/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-[fadeIn_0.3s_ease-out] font-sans\">\r\n          \r\n          {/* Header */}\r\n          <div className=\"p-4 bg-gradient-to-r from-cyan-900/80 to-blue-900/80 border-b border-white/10 flex justify-between items-center\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-white/10 rounded-lg relative\">\r\n                <Bot size={24} className=\"text-cyan-400\" />\r\n                <div className=\"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 border-2 border-gray-900 rounded-full\"></div>\r\n              </div>\r\n              <div>\r\n                <h3 className=\"text-white font-bold text-base\">Web Core AI</h3>\r\n                <p className=\"text-cyan-200/60 text-xs flex items-center gap-1\">\r\n                  <Sparkles size={10} /> Always active\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <button \r\n                onClick={clearChat}\r\n                title=\"Clear Chat\"\r\n                className=\"text-white/50 hover:text-red-400 transition-colors p-2 hover:bg-white/10 rounded-full\"\r\n              >\r\n                <Trash2 size={18} />\r\n              </button>\r\n              <button \r\n                onClick={() => setIsOpen(false)}\r\n                className=\"text-white/50 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full\"\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Messages */}\r\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-thin scrollbar-thumb-gray-700\">\r\n            {messages.map((msg, index) => (\r\n              <div\r\n                key={index}\r\n                className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}\r\n              >\r\n                <div\r\n                  className={`max-w-[85%] p-3.5 rounded-2xl text-sm leading-relaxed shadow-sm ${\r\n                    msg.sender === 'user'\r\n                      ? 'bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-br-none'\r\n                      : 'bg-white/10 text-gray-100 border border-white/5 rounded-bl-none'\r\n                  }`}\r\n                >\r\n                  <div className=\"text-sm leading-relaxed\">\r\n                    <ReactMarkdown\r\n                      components={{\r\n                        p: ({node, ...props}: any) => <p className=\"mb-2 last:mb-0\" {...props} />,\r\n                        ul: ({node, ...props}: any) => <ul className=\"list-disc list-inside mb-2 space-y-1\" {...props} />,\r\n                        ol: ({node, ...props}: any) => <ol className=\"list-decimal list-inside mb-2 space-y-1\" {...props} />,\r\n                        li: ({node, ...props}: any) => <li className=\"ml-2\" {...props} />,\r\n                        strong: ({node, ...props}: any) => <span className=\"font-bold text-white\" {...props} />,\r\n                        a: ({node, ...props}: any) => <a className=\"underline hover:text-cyan-300 transition-colors\" target=\"_blank\" rel=\"noopener noreferrer\" {...props} />,\r\n                      }}\r\n                    >\r\n                      {msg.text}\r\n                    </ReactMarkdown>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            \r\n            {loading && (\r\n              <div className=\"flex justify-start animate-pulse\">\r\n                <div className=\"bg-white/5 p-3 rounded-2xl rounded-bl-none flex items-center gap-2 border border-white/5\">\r\n                  <div className=\"w-2 h-2 bg-cyan-400 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\r\n                  <div className=\"w-2 h-2 bg-cyan-400 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\r\n                  <div className=\"w-2 h-2 bg-cyan-400 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          {/* Quick Questions Chips */}\r\n          <div className=\"px-4 pb-2 flex gap-2 overflow-x-auto scrollbar-none mask-linear-fade\">\r\n             {[\"Services\", \"Pricing\", \"About Us\", \"Contact\"].map((q, i) => (\r\n              <button\r\n                key={i}\r\n                onClick={() => sendMessage(q)}\r\n                className=\"whitespace-nowrap px-3 py-1.5 bg-white/5 hover:bg-cyan-500/20 border border-white/10 hover:border-cyan-500/50 rounded-full text-xs text-cyan-100 transition-colors flex-shrink-0\"\r\n              >\r\n                {q}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Input Area */}\r\n          <div className=\"p-4 border-t border-white/10 bg-gray-900/50\">\r\n            <div className=\"flex gap-2 relative\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"w-full bg-white/5 border border-white/10 rounded-xl pl-4 pr-12 py-3.5 text-white placeholder-white/30 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 focus:border-transparent text-sm transition-all\"\r\n                placeholder=\"Type a message...\"\r\n                value={input}\r\n                onChange={(e) => setInput(e.target.value)}\r\n                onKeyDown={handleKeyDown}\r\n                disabled={loading}\r\n              />\r\n              <button\r\n                onClick={() => sendMessage(input)}\r\n                disabled={loading || !input.trim()}\r\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg hover:shadow-lg hover:shadow-cyan-500/30 disabled:opacity-50 disabled:shadow-none transition-all\"\r\n              >\r\n                {loading ? <Loader2 size={16} className=\"animate-spin\" /> : <Send size={16} />}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default GeminiChat;"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;AAJA;;;;AAWA,MAAM,aAAuB;;IAC3B,iDAAiD;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ;+BAAY;YAClD,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,OAAO,QAAQ,KAAK,KAAK,CAAC,SAAS;gBACjC;oBAAE,MAAM;oBAAyF,QAAQ;gBAAK;aAC/G;QACH;;IAEA,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAU;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAS;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAU;IAChD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAU;IAE5D,MAAM,iBAAiB,IAAA,uKAAM,EAAiB;IAE9C,wDAAwD;IACxD,IAAA,0KAAS;gCAAC;YACR,aAAa,OAAO,CAAC,gBAAgB,KAAK,SAAS,CAAC;YACpD,eAAe,OAAO,EAAE,eAAe;gBAAE,UAAU;YAAS;QAC9D;+BAAG;QAAC;KAAS;IAEb,uDAAuD;IACvD,IAAA,0KAAS;gCAAC;YACR,MAAM,QAAQ;8CAAW;oBACvB,IAAI,CAAC,UAAU,CAAC,iBAAiB,SAAS,MAAM,KAAK,GAAG;wBACtD,UAAU;wBACV,iBAAiB;oBACjB,qDAAqD;oBACvD;gBACF;6CAAG,OAAO,qBAAqB;YAC/B;wCAAO,IAAM,aAAa;;QAC5B;+BAAG;QAAC;QAAQ;QAAe,SAAS,MAAM;KAAC;IAE3C,MAAM,YAAY;QAChB,MAAM,aAAwB;YAAC;gBAAE,MAAM;gBAAiC,QAAQ;YAAK;SAAE;QACvF,YAAY;QACZ,aAAa,UAAU,CAAC;IAC1B;IAEA,MAAM,cAAc,OAAO;QACzB,IAAI,CAAC,WAAW,IAAI,IAAI;QAExB,YAAY,CAAA,OAAQ;mBAAI;gBAAM;oBAAE,MAAM;oBAAY,QAAQ;gBAAO;aAAE;QACnE,SAAS;QACT,WAAW;QAEX,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,aAAa;gBACxC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,SAAS;gBAAW;YAC7C;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,YAAY,CAAA,OAAQ;uBAAI;oBAAM;wBAAE,MAAM,KAAK,KAAK;wBAAE,QAAQ;oBAAK;iBAAE;QACnE,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,UAAU;YACxB,YAAY,CAAA,OAAQ;uBAAI;oBAAM;wBAAE,MAAM;wBAAyE,QAAQ;oBAAK;iBAAE;QAChI,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,EAAE,GAAG,KAAK,SAAS,YAAY;IACrC;IAEA,qBACE;;YAEG,CAAC,wBACA,6LAAC;gBACC,SAAS,IAAM,UAAU;gBACzB,WAAU;;kCAEV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,4OAAa;gCAAC,MAAM;;;;;;0CAErB,6LAAC;gCAAK,WAAU;;kDACd,6LAAC;wCAAK,WAAU;;;;;;kDAChB,6LAAC;wCAAK,WAAU;;;;;;;;;;;;;;;;;;kCAGpB,6LAAC;wBAAK,WAAU;kCAAiH;;;;;;;;;;;;YAOpI,wBACC,6LAAC;gBAAI,WAAU;;kCAGb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,0MAAG;gDAAC,MAAM;gDAAI,WAAU;;;;;;0DACzB,6LAAC;gDAAI,WAAU;;;;;;;;;;;;kDAEjB,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAAiC;;;;;;0DAC/C,6LAAC;gDAAE,WAAU;;kEACX,6LAAC,yNAAQ;wDAAC,MAAM;;;;;;oDAAM;;;;;;;;;;;;;;;;;;;0CAI5B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,SAAS;wCACT,OAAM;wCACN,WAAU;kDAEV,cAAA,6LAAC,uNAAM;4CAAC,MAAM;;;;;;;;;;;kDAEhB,6LAAC;wCACC,SAAS,IAAM,UAAU;wCACzB,WAAU;kDAEV,cAAA,6LAAC,oMAAC;4CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;kCAMf,6LAAC;wBAAI,WAAU;;4BACZ,SAAS,GAAG,CAAC,CAAC,KAAK,sBAClB,6LAAC;oCAEC,WAAW,CAAC,KAAK,EAAE,IAAI,MAAM,KAAK,SAAS,gBAAgB,iBAAiB;8CAE5E,cAAA,6LAAC;wCACC,WAAW,CAAC,gEAAgE,EAC1E,IAAI,MAAM,KAAK,SACX,0EACA,mEACJ;kDAEF,cAAA,6LAAC;4CAAI,WAAU;sDACb,cAAA,6LAAC,sMAAa;gDACZ,YAAY;oDACV,GAAG,CAAC,EAAC,IAAI,EAAE,GAAG,OAAW,iBAAK,6LAAC;4DAAE,WAAU;4DAAkB,GAAG,KAAK;;;;;;oDACrE,IAAI,CAAC,EAAC,IAAI,EAAE,GAAG,OAAW,iBAAK,6LAAC;4DAAG,WAAU;4DAAwC,GAAG,KAAK;;;;;;oDAC7F,IAAI,CAAC,EAAC,IAAI,EAAE,GAAG,OAAW,iBAAK,6LAAC;4DAAG,WAAU;4DAA2C,GAAG,KAAK;;;;;;oDAChG,IAAI,CAAC,EAAC,IAAI,EAAE,GAAG,OAAW,iBAAK,6LAAC;4DAAG,WAAU;4DAAQ,GAAG,KAAK;;;;;;oDAC7D,QAAQ,CAAC,EAAC,IAAI,EAAE,GAAG,OAAW,iBAAK,6LAAC;4DAAK,WAAU;4DAAwB,GAAG,KAAK;;;;;;oDACnF,GAAG,CAAC,EAAC,IAAI,EAAE,GAAG,OAAW,iBAAK,6LAAC;4DAAE,WAAU;4DAAkD,QAAO;4DAAS,KAAI;4DAAuB,GAAG,KAAK;;;;;;gDAClJ;0DAEC,IAAI,IAAI;;;;;;;;;;;;;;;;mCArBV;;;;;4BA4BR,yBACC,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;4CAAkD,OAAO;gDAAE,gBAAgB;4CAAM;;;;;;sDAChG,6LAAC;4CAAI,WAAU;4CAAkD,OAAO;gDAAE,gBAAgB;4CAAQ;;;;;;sDAClG,6LAAC;4CAAI,WAAU;4CAAkD,OAAO;gDAAE,gBAAgB;4CAAQ;;;;;;;;;;;;;;;;;0CAIxG,6LAAC;gCAAI,KAAK;;;;;;;;;;;;kCAIZ,6LAAC;wBAAI,WAAU;kCACX;4BAAC;4BAAY;4BAAW;4BAAY;yBAAU,CAAC,GAAG,CAAC,CAAC,GAAG,kBACvD,6LAAC;gCAEC,SAAS,IAAM,YAAY;gCAC3B,WAAU;0CAET;+BAJI;;;;;;;;;;kCAUX,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,MAAK;oCACL,WAAU;oCACV,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,WAAW;oCACX,UAAU;;;;;;8CAEZ,6LAAC;oCACC,SAAS,IAAM,YAAY;oCAC3B,UAAU,WAAW,CAAC,MAAM,IAAI;oCAChC,WAAU;8CAET,wBAAU,6LAAC,+NAAO;wCAAC,MAAM;wCAAI,WAAU;;;;;iGAAoB,6LAAC,6MAAI;wCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQxF;GA/MM;KAAA;uCAiNS"}}]
}